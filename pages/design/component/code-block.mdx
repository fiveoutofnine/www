import DesignLayout from '@/components/layouts/design';
import DesignComponentsDisplay from '@/components/pages/design/components-display';
import { Badge, CodeBlock } from '@/components/ui';

# Code Block

A container used to display code segments with syntax highlighting and formatting.

```tsx fileName="code-block.tsx"
// Minimal version for display purposes.
const CodeBlock: FC = () => {
  return (
    <CodeBlockContainer>
      <CodeBlockHeader />
      <pre>
        <Code />
      </pre>
    </CodeBlockContainer>
  );
};
```

## No filename

<DesignComponentsDisplay className="grid-cols-1 px-4">
  <CodeBlock language="tsx" children={TSX_SAMPLE_CODE} />
</DesignComponentsDisplay>

## Hide line numbers

<DesignComponentsDisplay className="grid-cols-1 px-4">
  <CodeBlock language="tsx" showLineNumbers={false} children={TSX_SAMPLE_CODE} />
</DesignComponentsDisplay>

## Highlight lines

<DesignComponentsDisplay className="grid-cols-1 px-4">
  <CodeBlock language="tsx" highlightLines={[2, 4]} children={TSX_SAMPLE_CODE} />
</DesignComponentsDisplay>

## Flat top

<DesignComponentsDisplay className="grid-cols-1 px-4 sm:grid-cols-2">
  <CodeBlock language="tsx" fileName="counter.tsx" roundedTop={false} children={TSX_SAMPLE_CODE} />
  <CodeBlock language="tsx" roundedTop={false} children={TSX_SAMPLE_CODE} />
</DesignComponentsDisplay>

## Supported languages

<DesignComponentsDisplay
  className="grid-cols-1 px-4 sm:grid-cols-2 lg:grid-cols-3"
  showSource={false}
>
  <CodeBlock
    language="js"
    fileName="fib.js"
    showLineNumbers={false}
    children="const fib = (n) => n <= 1 ? 1 : fib(n - 1) + fib(n - 2)"
  />
  <CodeBlock
    language="ts"
    fileName="string-keys.ts"
    showLineNumbers={false}
    children="type StringKeys<T> = { [K in keyof T]: T[K] extends string ? K : never; }[keyof T]; // https://twitter.com/mattpocockuk/status/1672165377634103298"
  />
  <CodeBlock
    language="jsx"
    fileName="counter.jsx"
    showLineNumbers={false}
    children="<button onClick={() => setCount(count + 1)}>{count}</button>"
  />
  <CodeBlock
    language="tsx"
    fileName="button.tsx"
    showLineNumbers={false}
    children="const Button: FC<JSX.IntrinsicElements['button']> = ({ children, ...rest }) => <button {...rest}>{children}<button>;"
  />
  <CodeBlock
    language="sol"
    fileName="king-knight-validation.sol"
    showLineNumbers={false}
    children="if (p & 3 == 1) { if (x*x + y*y - p > 1) return false; } // https://twitter.com/fiveoutofnine/status/1658930303019122688"
  />
  <CodeBlock
    language="py"
    fileName="qsort.py"
    showLineNumbers={false}
    children="qsort = lambda L: [] if L == [] else qsort([x for x in L[1:] if x < L[0]]) + L[0:1] + qsort([x for x in L[1:] if x >= L[0]]) # https://wiki.python.org/moin/Powerful%20Python%20One-Liners"
  />
  <CodeBlock
    className="col-span-full"
    fileName="gmeow"
    language="none"
    showLineNumbers={false}
    children={
      '  /\\_/\\     ~gmeow~\n ( o.o )    follow @fiveoutofnine on twitter\n  > ^ <     https://twitter.com/fiveoutofnine'
    }
  />
</DesignComponentsDisplay>

## Usage via MDX

To use `CodeBlock` in MDX, either import it or type [**basic Markdown syntax**](https://www.markdownguide.org/extended-syntax/#fenced-code-blocks), which will parse the MDX and render an instance of `CodeBlock`. To provide props, include them after the 3 backticks and specified language.

<div className="grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-1 lg:grid-cols-2">
  <CodeBlock showLineNumbers={false} children={MARKDOWN_SAMPLE_CODE} />
  <CodeBlock
    fileName="Example.tsx"
    language="tsx"
    showLineNumbers={false}
    children="const Example = () => <div />;"
  />
</div>

export const MARKDOWN_SAMPLE_CODE =
  '```tsx fileName="Example.tsx" showLineNumbers={false}\nconst Example = () => <div />;\n```';

export const TSX_SAMPLE_CODE = `const Counter: FC = () => {
  const [count, setCount] = useState<number>(0);\n
  return <button onClick={() => setCount(count + 1)}>{count}</button>;
};`;

export default (props) => (
  <DesignLayout
    category="Components"
    name="Code Block"
    description="A container used to display code segments with syntax highlighting and formatting."
    selected="/design/component/code-block"
    {...props}
  />
);
